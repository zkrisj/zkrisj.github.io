<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>é’è®­è¥å¤§é¡¹ç›®æ€»ç»“ ï½œ é’è®­è¥ç¬”è®° | zkrisj</title>

<link rel="shortcut icon" href="https://zkrisj.github.io/favicon.ico?v=1683589449040">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://zkrisj.github.io/styles/main.css">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages//dart.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
    
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="/">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            zkrisj
        </div>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/post/about" class="menu gt-a-link">
                    å…³äº
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1683589449040"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 7px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = () => {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    é’è®­è¥å¤§é¡¹ç›®æ€»ç»“ ï½œ é’è®­è¥ç¬”è®°
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2023-02-23 Â·
                    </time>
                    
                        <a href="https://zkrisj.github.io/tag/-SviN8-mD/" class="post-tags">
                            # nodeJS
                        </a>
                    
                </div>
                <div class="post-content">
                    <h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>é’è®­è¥å¤§é¡¹ç›®ï¼š</p>
<ul>
<li>åŸºäº NextJS å¼€å‘ä»¿æ˜é‡‘ç«™ç‚¹</li>
<li>ç»„ä»¶åº“</li>
<li>å…³äºæ–°å† ç–«æƒ…çš„æ•°æ®å¯è§†åŒ–ä½œå“</li>
</ul>
<p>æˆ‘ä»¬å›¢é˜Ÿåšçš„æ˜¯ç»„ä»¶åº“é¡¹ç›®ã€‚</p>
<h2 id="é¡¹ç›®éœ€æ±‚">é¡¹ç›®éœ€æ±‚</h2>
<p>è™½ç„¶ä¸šç•Œå·²ç»æœ‰éå¸¸å¤šçŸ¥åç»„ä»¶åº“(antd/iview/material design ç­‰)ï¼Œä½†å®é™…å·¥ä½œä¸­å„å›¢é˜Ÿé€šå¸¸ä¹Ÿä¼šåº”è®¾è®¡è§„èŒƒè¦æ±‚ï¼Œè‡ªè¡Œå¼€å‘å±äºå›¢é˜Ÿå†…éƒ¨çš„åŸºç¡€/ä¸šåŠ¡ç»„ä»¶åº“ï¼Œå¯¹äºé«˜é˜¶å‰ç«¯ï¼Œå¼€å‘ä¸€ä¸ªå±äºè‡ªå·±çš„ç»„ä»¶åº“å·²ç»æ˜¯ä¸€ç§æ™®éä½†é‡è¦çš„åŸºæœ¬æŠ€èƒ½ã€‚</p>
<p>å®é™…å¼€å‘ä¸­æœ‰è®¸å¤šéœ€è¦è€ƒè™‘çš„ç»†èŠ‚ï¼š</p>
<h3 id="ä½¿ç”¨ä½•ç§è¯­è¨€å¼€å‘ç»„ä»¶åº“">ä½¿ç”¨ä½•ç§è¯­è¨€å¼€å‘ç»„ä»¶åº“ï¼Ÿ</h3>
<ul>
<li>ts/es6 + babel + flow</li>
<li>less/sass/stylus/postcss/atomic-css</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>Sass/Less</th>
<th>Atomic CSS</th>
<th>css-in-js</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®Œå…¨æ”¯æŒæ ·å¼è¦†ç›–</td>
<td>âœ…</td>
<td>âœ…</td>
<td>â—(éœ€è¦ä½¿ç”¨classNameæ”¯æŒ)</td>
</tr>
<tr>
<td>æ”¯æŒremå¸ƒå±€</td>
<td>âœ…</td>
<td>âœ…</td>
<td>â—(å¤§éƒ¨åˆ†åº“æ”¯æŒ)</td>
</tr>
<tr>
<td>å¯è¯»æ€§</td>
<td>å¼º</td>
<td>ç¨å¼±</td>
<td>å¼º</td>
</tr>
<tr>
<td>ä¸Šæ‰‹æˆæœ¬</td>
<td>ä½</td>
<td>ä¸­</td>
<td>é«˜</td>
</tr>
<tr>
<td>æ˜¯å¦æ”¯æŒSSR</td>
<td>å¤©ç„¶æ”¯æŒ</td>
<td>å¤©ç„¶æ”¯æŒ</td>
<td>éœ€è¦é¢å¤–æ”¯æŒ</td>
</tr>
<tr>
<td>æ˜¯å¦æ”¯æŒæµå¼æ¸²æŸ“</td>
<td>å¤©ç„¶æ”¯æŒ</td>
<td>å¤©ç„¶æ”¯æŒ</td>
<td>éœ€è¦é¢å¤–æ”¯æŒ</td>
</tr>
<tr>
<td>æ”¯æŒpostcss</td>
<td>âœ…</td>
<td>âœ…</td>
<td>â—(æœ‰è‡ªå·±çš„pluginç”Ÿæ€)</td>
</tr>
</tbody>
</table>
<h3 id="å¦‚ä½•ä¿è¯ç»„ä»¶åº“è´¨é‡å·¥ç¨‹åŒ–">å¦‚ä½•ä¿è¯ç»„ä»¶åº“è´¨é‡ï¼ˆå·¥ç¨‹åŒ–ï¼‰ï¼Ÿ</h3>
<h4 id="å•æµ‹-e2e-æµ‹è¯•">å•æµ‹ã€e2e æµ‹è¯•</h4>
<ol>
<li>ç»„ä»¶åº“çš„è´¨é‡ä¿éšœä»æµç¨‹ä¸Šæ¥è¯´ï¼Œä¸»è¦æ˜¯ code review å’Œä¸¥æ ¼çš„ UI éªŒæ”¶ã€QA æµ‹è¯•ç­‰æµç¨‹ã€‚ä»æŠ€æœ¯å±‚é¢æ¥è¯´å¯ä»¥æ”¶æ•›å‘åŒ…æƒé™ï¼Œä»¥åŠåœ¨ CI/CD ä¸­å®ç°è‡ªåŠ¨å‘åŒ…ï¼Œæœç»ç ”å‘è¿‡ç¨‹ä¸­åœ¨é master åˆ†æ”¯ä¸Šéšæ„å‘åŒ…çš„å±é™©æ“ä½œã€‚è¿˜æœ‰å•å…ƒæµ‹è¯•ã€å¿«ç…§æµ‹è¯•ã€e2e æµ‹è¯•ç­‰å¸¸ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚</li>
</ol>
<p>å°½å¯èƒ½æ¥å…¥æµ‹è¯•å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>jestã€chaiã€enzymeã€karma</li>
<li>@testing-library/react</li>
<li>benchmark</li>
</ul>
<ol start="2">
<li>lintã€lint-stagedã€prettierã€style-lint ç­‰ã€‚</li>
</ol>
<p>åˆ¶å®šè§„èŒƒçš„ç›®çš„åœ¨äºä¿è¯è´¨é‡ã€æ–¹ä¾¿ä¸šåŠ¡æ–¹ä½¿ç”¨å’Œå¢åŠ ç»„ä»¶åº“çš„å¯æ‰©å±•æ€§ã€‚æ¯”å¦‚ä¸Šæ–‡æåˆ°çš„å¯¹äºæ ·å¼çš„å°è£…ã€å¸¸ç”¨ mixin å°è£…ï¼Œå¼ºåˆ¶ä½¿ç”¨é¢œè‰²å˜é‡ç­‰ã€‚è¿˜æœ‰è®¾è®¡ç»Ÿä¸€çš„ç»„ä»¶åº“ API é£æ ¼è§„èŒƒï¼Œèƒ½é™ä½ä¸šåŠ¡æ–¹çš„ä½¿ç”¨æˆæœ¬ã€‚</p>
<p>æ‹†è§£æ¥çœ‹ï¼š</p>
<ul>
<li>ä»£ç æäº¤ï¼š
<ul>
<li>husky</li>
<li>commitlint</li>
<li>lint-staged</li>
</ul>
</li>
<li>ä»£ç é£æ ¼ï¼š
<ul>
<li>eslint + prettier</li>
<li>stylelint</li>
<li>commit-lint</li>
</ul>
</li>
<li>æ–‡æ¡£é£æ ¼ï¼š
<ul>
<li>remark-lint</li>
</ul>
</li>
<li>ç»„ä»¶æ¨¡æ¿ï¼š
<ul>
<li>plop.js</li>
</ul>
</li>
<li>ä¾èµ–ç®¡ç†ï¼š
<ul>
<li>lint-deps</li>
</ul>
</li>
<li>ç›®å½•è§„èŒƒ</li>
</ul>
<h3 id="å¦‚ä½•ç¼–å†™æ–‡æ¡£ç«™">å¦‚ä½•ç¼–å†™æ–‡æ¡£ç«™ï¼Ÿ</h3>
<p>ç»„ä»¶åº“ä¸€èˆ¬æœ‰ä¸€ä¸ªæ¼”ç¤ºç«™ç‚¹ã€‚</p>
<ul>
<li>å¯¹äºç§»åŠ¨ç«¯ç»„ä»¶åº“ï¼Œå¯ä»¥é€šè¿‡ webpack åˆ«åçš„æ–¹æ³•é‡å†™å®ƒä»¬çš„ç»„ä»¶ï¼Œä»¥æ”¯æŒç§»åŠ¨ç«¯é¢„è§ˆï¼Œæ–¹ä¾¿ UI éªŒæ”¶ã€‚</li>
<li>å¯¹äºå›½é™…åŒ–çš„ç»„ä»¶ï¼Œå¯ä»¥æä¾›ç±»ä¼¼ vconsole å½¢å¼çš„ devtoolsï¼Œå¯è§†åŒ–åˆ‡æ¢ dark/light Modeã€rtl/lrt ç­‰èƒ½åŠ›ï¼Œæé«˜å¼€å‘å’Œæµ‹è¯•æµç¨‹ä¸­çš„æ•ˆç‡ã€‚</li>
</ul>
<p>å¸¸è§çš„æ–‡æ¡£ç«™æŠ€æœ¯é€‰å‹ï¼š</p>
<ul>
<li>doczï¼šä¸€ä¸ªéå¸¸æˆç†Ÿçš„ md æ–‡æ¡£ç«™å·¥å…·ï¼ŒåŒæ ·æ”¯æŒåµŒå…¥ react ç»„ä»¶</li>
<li>dumiï¼šè¿˜èƒ½æ”¯æŒç»„ä»¶è°ƒè¯•</li>
<li>changelog</li>
<li>Github Pages</li>
<li>vitepress</li>
<li>storybook</li>
<li>remark</li>
<li>docsearch</li>
</ul>
<h3 id="æ ¸å¿ƒéœ€æ±‚">æ ¸å¿ƒéœ€æ±‚</h3>
<ul>
<li>é€šç”¨å‹ç»„ä»¶: æ¯”å¦‚ Button, Icon ç­‰</li>
<li>å¸ƒå±€å‹ç»„ä»¶: æ¯”å¦‚ Grid, Layout å¸ƒå±€ç­‰</li>
<li>å¯¼èˆªå‹ç»„ä»¶: æ¯”å¦‚é¢åŒ…å±‘ Breadcrumb, ä¸‹æ‹‰èœå• Dropdown, èœå• Menu ç­‰</li>
<li>æ•°æ®å½•å…¥å‹ç»„ä»¶: æ¯”å¦‚ form è¡¨å•, Switch å¼€å…³, Upload æ–‡ä»¶ä¸Šä¼ ï¼Œæ—¥æœŸé€‰æ‹©ï¼Œä¸‹æ‹‰é€‰æ‹©ç­‰</li>
<li>æ•°æ®å±•ç¤ºå‹ç»„ä»¶: æ¯”å¦‚ Avator å¤´åƒ, Table è¡¨æ ¼, List åˆ—è¡¨ç­‰</li>
<li>åé¦ˆå‹ç»„ä»¶: æ¯”å¦‚ Progress è¿›åº¦æ¡, Drawer æŠ½å±‰, Modal å¯¹è¯æ¡†ç­‰</li>
</ul>
<p>å…·ä½“æ•ˆæœï¼Œå¯å‚è€ƒ <a href="https://www.antdv.com/components/overview-cn/">antd</a>ã€‚</p>
<h2 id="æŠ€æœ¯é€‰ç”¨">æŠ€æœ¯é€‰ç”¨</h2>
<h5 id="æ ¸å¿ƒæŠ€æœ¯æ ˆ">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h5>
<ul>
<li>ts +vue3</li>
<li>sass</li>
<li>vite</li>
</ul>
<h5 id="æµ‹è¯•å·¥å…·">æµ‹è¯•å·¥å…·</h5>
<ul>
<li>vitest</li>
</ul>
<h5 id="è§„èŒƒå·¥å…·">è§„èŒƒå·¥å…·</h5>
<ul>
<li>ä»£ç æäº¤è§„èŒƒï¼šhuskyï¼ˆæäº¤æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼‰+ commitlintï¼ˆæäº¤ä¿¡æ¯æ ·å¼æ£€æŸ¥ï¼‰</li>
<li>ä»£ç é£æ ¼ï¼šeslintï¼ˆè¯­æ³•ï¼‰+ prettierï¼ˆæ ¼å¼ï¼‰+ huskyï¼ˆæäº¤æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼‰</li>
</ul>
<h5 id="æ–‡æ¡£å·¥å…·">æ–‡æ¡£å·¥å…·</h5>
<ul>
<li>vitepress</li>
</ul>
<h5 id="åŒ…ç®¡ç†å·¥å…·">åŒ…ç®¡ç†å·¥å…·</h5>
<ul>
<li>pnpm</li>
</ul>
<h2 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h2>
<pre><code>.
â”œâ”€â”€ .husky               # gi tæäº¤æ—¶è§¦å‘çš„é’©å­å‡½æ•°
â”œâ”€â”€ config               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ coverage             # è¦†ç›–ç‡æŠ¥å‘Š
â”œâ”€â”€ demo                 # ä»£ç èŒƒä¾‹
â”œâ”€â”€ docs                 # é™æ€ç«™ç‚¹ç›¸å…³é…ç½®
â”œâ”€â”€ internal 		 # é‡Œé¢æ”¾ç½®çš„æœ‰ eslint é…ç½®ã€æ‰“åŒ…é…ç½®
â”œâ”€â”€ node_modules  
â”œâ”€â”€ packages             # é¡¹ç›®çš„æ ¸å¿ƒç›®å½•ï¼Œç»„ä»¶çš„ç¼–å†™	
â”œâ”€â”€ scripts              # è„šæœ¬å‘å¸ƒã€æäº¤ä¿¡æ¯æ£€æŸ¥
â”œâ”€â”€ src                  # ç»„ä»¶ä»£ç 
â””â”€â”€ types                # TSç±»å‹å®šä¹‰
</code></pre>
<h3 id="ç»„ä»¶ç›®å½•ç»“æ„">ç»„ä»¶ç›®å½•ç»“æ„</h3>
<p>ä»¥ button ç»„ä»¶ä¸ºä¾‹ï¼š</p>
<pre><code>â”œâ”€â”€ src                  # ç»„ä»¶ä»£ç 
    â””â”€â”€ button           # ç»„ä»¶åŒ…å
         â”œâ”€â”€ index.ts    # ç»„ä»¶å…¥å£
         â”œâ”€â”€ Button.tsx  # ç»„ä»¶ä»£ç   
         â””â”€â”€ __tests__   # æµ‹è¯•ç”¨ä¾‹
                  â””â”€â”€ Button.spec.ts
</code></pre>
<ul>
<li>åŒ…åï¼šå°å†™ + ä¸­åˆ’çº¿ï¼›</li>
<li>ç»Ÿä¸€å…¥å£æ–‡ä»¶ï¼š index.tsï¼›</li>
<li>ç»„ä»¶ä»£ç ï¼š å¤§é©¼å³°ï¼›</li>
<li>æµ‹è¯•ç”¨ä¾‹ä»£ç  ï¼š æµ‹è¯•å¯¹è±¡å+ .spec.tsã€‚</li>
</ul>
<p>ä»¥ button ç»„ä»¶ä¸ºä¾‹å­çš„æµ‹è¯•ï¼š</p>
<ol>
<li>å®šä¹‰æµ‹è¯•æ–‡ä»¶ <code>src/button/__tests__/Button.test.ts</code>ã€‚</li>
</ol>
<h2 id=""><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a64f1a93c6f4f6aa3082bca5fe9d882~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></h2>
<pre><code>1. åœ¨æµ‹è¯•æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ª `describe` åˆ†ç»„ã€‚
2. åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­è¾“å…¥ `'Button'`ï¼Œè¡¨æ˜æ˜¯é’ˆå¯¹ `Button` ç»„ä»¶çš„æµ‹è¯•ã€‚
3. ç¼–å†™æµ‹è¯•ç”¨ä¾‹ `test`ã€‚
4. ä½¿ç”¨ `shallowMount` åˆå§‹åŒ–ç»„ä»¶ï¼Œæµ‹è¯•æŒ‰é’®æ˜¯å¦å·¥ä½œæ­£å¸¸ï¼Œåªéœ€è¦æ–­è¨€åˆ¤æ–­æŒ‰é’®ä¸­çš„å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®å°±å¯ä»¥äº†ã€‚
</code></pre>
<ol start="2">
<li>é…ç½® package.jsonã€‚</li>
</ol>
<h2 id="-2"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39bbc040113248f6bb586b56446ddcf5~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></h2>
<ol start="3">
<li>åœ¨æ§åˆ¶å°å¯åŠ¨æµ‹è¯•å‘½ä»¤ï¼Œå¹¶æŸ¥çœ‹ç»“æœã€‚</li>
</ol>
<pre><code>pnpm test
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9326e27a1a52450196473df92e1386fe~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></figure>
<blockquote>
<p>åœ¨ä»£ç ç¼–å†™é˜¶æ®µï¼Œå»ºè®®åªå¯¹é‡ç‚¹åŠŸèƒ½è¿›è¡Œæµ‹è¯•ï¼Œæ²¡å¿…è¦ä¸€å®šè¿½æ±‚è¿‡é«˜çš„æµ‹è¯•è¦†ç›–ç‡ã€‚</p>
</blockquote>
<h2 id="monorepo">monorepo</h2>
<p>pnpm åŸç”Ÿæ”¯æŒ monorepo æ–¹æ¡ˆï¼š</p>
<ul>
<li>pnpm-workspace.yaml å®šä¹‰äº†å·¥ä½œç©ºé—´çš„æ ¹ç›®å½•ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬è¦å•ç‹¬å¯¹æŸä¸€ä¸ªé¡¹ç›®ä¸‹å®‰è£…ä¸€äº›åŒ…æ—¶ï¼Œå¯ä»¥åˆ°è¯¥é¡¹ç›®ç›®å½•ä¸‹å®‰è£…ï¼Œæˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹ä½¿ç”¨ <code>pnpm i åŒ… --filter é¡¹ç›®å</code>ã€‚</li>
<li>å½“æˆ‘ä»¬è¦åœ¨æ ¹ç›®å½•ä¸‹å®‰è£…æŸäº›åŒ…ï¼Œéœ€è¦åŠ ä¸Š <code>-w</code> åç¼€ã€‚</li>
</ul>
<pre><code># pnpm-workspace.yaml
packages:
  - packages/*
  - docs
  - play
  - internal/*
</code></pre>
<h2 id="git-flow">git flow</h2>
<ol>
<li>ä»£ç æäº¤å½¢å¼ä¸ºï¼š<code>type: æäº¤ä¿¡æ¯</code>ã€‚</li>
</ol>
<h2 id="-3"><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/131cc95daaae40768f44c2ba73ae880b~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></h2>
<ol start="2">
<li>ä¸»è¦æœ‰ä»¥ä¸‹åˆ†æ”¯ï¼š</li>
</ol>
<ul>
<li>main åˆ†æ”¯ï¼šè·Ÿçº¿ä¸Šå‘å¸ƒç‰ˆæœ¬ä¿æŒä¸€è‡´</li>
<li>develop åˆ†æ”¯ï¼šå¼€å‘çš„ä¸»åˆ†æ”¯ï¼Œä¿è¯æœ€æ–°çš„ä»£ç </li>
<li>å…¶ä»–åˆ†æ”¯ï¼šå®Œæˆä¸€ä¸ªæ–°çš„åŠŸèƒ½æ—¶ç”¨åˆ°çš„åˆ†æ”¯</li>
</ul>
<ol start="3">
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</li>
</ol>
<ul>
<li>main åˆ†æ”¯ä¸è¦åŠ¨ï¼</li>
<li>å½“åŠŸèƒ½å®Œæˆä¹‹åéœ€è¦åˆå¹¶æ—¶ï¼Œåˆå¹¶åˆ° develop åˆ†æ”¯ï¼Œæ³¨æ„åˆå¹¶ä¹‹å‰å…ˆæ‹‰å– develop åˆ†æ”¯ï¼Œåˆå¹¶æ—¶å»ºè®®å¤šä½¿ç”¨ rebase æŒ‡ä»¤ï¼Œä¿è¯æäº¤è®°å½•çš„ç®€æ´</li>
</ul>
<h2 id="æ–‡æ¡£">æ–‡æ¡£</h2>
<ol>
<li>åœ¨ packages/components/index.ts ä¸­æŒ‰æ ¼å¼<strong>å¯¼å‡ºç»„ä»¶</strong>ã€‚</li>
</ol>
<pre><code class="language-ts">import { App } from 'vue'
import DateTimePicker from './DatePicker/DateTimePicker/DateTimePicker.vue'
import Input from './input/Input.vue'
import Pagination from './Pagination/index'
import WvTable from './Table/index'
import WvRadio from './Table/radio'
import Button from &quot;./Button/src/Button.vue&quot;;
import Col from './Layout/src/col.vue';
import Row from './Layout/src/row.vue'
import Notification from './notification/Notification.vue'
import { Dropdown, DropdownItem, DropdownMenu } from './Dropdown'
import WVcarousel from './carousel/WV-carousel.vue'

// å¯¼å‡ºå•ç‹¬ç»„ä»¶
export {
  DateTimePicker,
  Input,
  Pagination,
  Button,
  Col,
  Row,
  Notification,
  WvTable,
  WvRadio,
  Dropdown,
  DropdownMenu,
  DropdownItem
}

// ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Œå®ç°ä¸€ä¸ªinstallæ–¹æ³•
export default {
  install(app: App): void {
    app.component('DateTimePicker', DateTimePicker);
    app.component('Input', Input);
    app.component('Pagination', Pagination);
    app.component('WvTable', WvTable)
    app.component('WvRadio', WvRadio)
    app.component('WButton', Button);
    app.component('WRow', Row);
    app.component('WCol', Col);
    app.component(Notification.name, Notification)
    app.component('WDropdown', Dropdown)
    app.component('WDropdownMenu', DropdownMenu)
    app.component('WDropdownItem', DropdownItem)
    app.component(&quot;WVcarousel&quot;, WVcarousel);
  },
}
</code></pre>
<ol start="2">
<li>é…ç½® <code>docs/.vitepress/config.ts</code>ï¼Œæ·»åŠ å·¦ä¾§å¯¼èˆªæ æ¡ç›®ã€‚</li>
</ol>
<pre><code class="language-ts">const sidebar = {
  '/': [
    { text: 'å¿«é€Ÿå¼€å§‹', link: '/' },
    {
      text: 'é€šç”¨',
      children: [
        { text: 'Button æŒ‰é’®', link: '/components/Button/' },
        { text: 'Layout å¸ƒå±€', link: '/components/Layout/' },
      ]
    },
    {
      text: 'Formè¡¨å•ç»„ä»¶',
      children: [
        { text: 'DateTimePicker æ—¥æœŸé€‰æ‹©å™¨', link: '/components/DateTimePicker/' },
        { text: 'Input è¾“å…¥æ¡†', link: '/components/Input/' },
      ]
    },
    {
      text: 'Data æ•°æ®å±•ç¤º',
      children: [
        { text: 'Table è¡¨æ ¼', link: '/components/Table/' },
        { text: 'Pagination åˆ†é¡µ', link: '/components/Pagination/' }
      ]
    },
    {
      text: 'Feedback åé¦ˆç»„ä»¶',
      children: [
        { text: 'Notification é€šçŸ¥', link: '/components/Notification/' }
      ]
    },
    {
      text: 'Navigation å¯¼èˆª',
      children: [
        { text: 'Dropdown ä¸‹æ‹‰èœå•', link: '/components/Dropdown/' }
      ]
    },
    {
      text: 'Others å…¶ä»–',
      children: [
        { text: 'carousel è½®æ’­å›¾', link: '/components/carousel/' }
      ]
    },
  ]
}
export default {
  title: &quot;ğŸ”¨ weView&quot;,
  themeConfig: {
    sidebar,
  },

  markdown: {
    config: (md) =&gt; {
      const { demoBlockPlugin } = require('vitepress-theme-demoblock')
      md.use(demoBlockPlugin)
    }
  }
}
</code></pre>
<ol start="3">
<li>æ–°å»ºä¸»é¢˜é…ç½®æ–‡ä»¶ <code>docs/.vitepress/theme/index.ts</code>ï¼Œå¯¼å…¥é»˜è®¤ä¸»é¢˜ã€å·²å®‰è£…ä¸»é¢˜ã€åœ¨ packages/components/index.ts ä¸­å¯¼å‡ºçš„ç»„ä»¶å’Œéœ€è¦çš„å­—ä½“æ ·å¼æ–‡ä»¶ã€‚</li>
</ol>
<pre><code class="language-ts">import DefaultTheme from 'vitepress/theme'
// ä¸»é¢˜æ ·å¼
import 'vitepress-theme-demoblock/theme/styles/index.css'
// æ’ä»¶çš„ç»„ä»¶ï¼Œä¸»è¦æ˜¯demoç»„ä»¶
import Demo from 'vitepress-theme-demoblock/components/Demo.vue'
import DemoBlock from 'vitepress-theme-demoblock/components/DemoBlock.vue'
import weView from '../../../packages/components/index.ts'
import '../../../packages/fonts/iconfont.css'

export default {
  ...DefaultTheme,
  enhanceApp({ app }) {
    app.use(weView)
    app.component('Demo', Demo)
    app.component('DemoBlock', DemoBlock)
  },
}
</code></pre>
<ol start="4">
<li>åœ¨ docs/components/ ä¸‹é¢æ–°å»º<strong>ç»„ä»¶åç§°</strong>æ–‡ä»¶å¤¹ï¼Œåå­—ä¸º <code>link</code> å±æ€§å€¼å¯¹åº”è·¯å¾„ <code>/components/</code> åçš„å•è¯ã€‚</li>
</ol>
<h2 id="-4"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec81bf1e54a648bea8374ccc8567ee76~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></h2>
<ol start="5">
<li>åœ¨<strong>ç»„ä»¶åç§°</strong>æ–‡ä»¶å¤¹ä¸­æ–°å»º <code>index.md</code> æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é‡Œé¢å¼•å…¥å’Œä½¿ç”¨å¤–éƒ¨ Vue ç»„ä»¶ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<pre><code class="language-html">:::demo åŸºç¡€ä½¿ç”¨
```vue
&lt;template&gt;
 &lt;Input v-model=&quot;inputText2&quot; placeholder=&quot;è¯·è¾“å…¥...&quot; clearable/&gt;
&lt;/template&gt;

&lt;script&gt;
import { ref } from 'vue'

export default {
  setup() {
    const inputText2 = ref('')
    return {
      inputText2
    }
  },
}
&lt;/script&gt;
\```
:::
</code></pre>
<p>ä¼šæ¸²æŸ“å‡ºä»¥ä¸‹å†…å®¹ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/556d2a9315e34beeb5472aa0c1732134~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<h2 id="åˆ†é¡µå’Œè¡¨æ ¼">åˆ†é¡µå’Œè¡¨æ ¼</h2>
<p>å› ä¸ºæˆ‘è´Ÿè´£çš„æ˜¯ <code>Pagination</code> å’Œ <code>Table</code> ç»„ä»¶ï¼Œä½† Ant Design Vue å’Œ Element Plus çš„è¡¨æ ¼ç»„ä»¶éƒ½å¤ªå¤æ‚äº†ï¼Œæ‰€ä»¥æˆ‘å‚è€ƒçš„æ˜¯è¾ƒç®€å•çš„ layui - vueã€‚</p>
<h3 id="pagination">Pagination</h3>
<h4 id="html-ç»“æ„">HTML ç»“æ„</h4>
<pre><code class="language-html">&lt;template&gt;
  &lt;div class=&quot;pager pager-default&quot;&gt;
    &lt;!-- è¾…åŠ©æ ‡ç­¾, ä¸º total computed é€»è¾‘æ­£å¸¸æ‰§è¡Œè€Œåˆ›å»ºçš„ä¸´æ—¶æ ‡ç­¾ --&gt;
    &lt;div style=&quot;display: none&quot;&gt;{{ totalPage }}&lt;/div&gt;
    &lt;span v-if=&quot;showCount&quot; class=&quot;pager-count&quot;&gt;å…± {{ total }} æ¡ {{ maxPage }}
      é¡µ&lt;/span&gt;
    &lt;a href=&quot;javascript:;&quot; class=&quot;pager-prev&quot; :class=&quot;[
        currentPage === 1 ? 'disabled' : '',
        theme &amp;&amp; currentPage !== 1 ? 'pager-a-' + theme : '',
      ]&quot; @click=&quot;prev()&quot;&gt;
      &lt;slot v-if=&quot;slots.prev&quot; name=&quot;prev&quot; /&gt;
      &lt;template v-else&gt;ä¸Šä¸€é¡µ&lt;/template&gt;
    &lt;/a&gt;
    &lt;template v-if=&quot;showPage&quot;&gt;
      &lt;template v-for=&quot;index of totalPage&quot; :key=&quot;index&quot;&gt;
        &lt;span v-if=&quot;index === currentPage&quot; class=&quot;pager-curr&quot;&gt;
          &lt;em class=&quot;pager-em&quot; :class=&quot;[theme ? 'bg-' + theme : '']&quot; /&gt;
          &lt;em&gt;{{ index }}&lt;/em&gt;
        &lt;/span&gt;
        &lt;a v-else href=&quot;javascript:;&quot; @click=&quot;jump(index)&quot;
          :class=&quot;[theme ? 'pager-a-' + theme : '']&quot;&gt;{{ index }}&lt;/a&gt;
      &lt;/template&gt;
    &lt;/template&gt;
    &lt;a href=&quot;javascript:;&quot; class=&quot;pager-next&quot; :class=&quot;[
        currentPage === maxPage || maxPage === 0 ? 'disabled' : '',
        theme &amp;&amp; currentPage !== maxPage &amp;&amp; maxPage !== 0
          ? 'pager-a-' + theme
          : '',
      ]&quot; @click=&quot;next()&quot;&gt;
      &lt;slot v-if=&quot;slots.next&quot; name=&quot;next&quot; /&gt;
      &lt;template v-else&gt;ä¸‹ä¸€é¡µ&lt;/template&gt;
    &lt;/a&gt;
    &lt;span v-if=&quot;showLimit&quot; class=&quot;pager-limits&quot;&gt;
      &lt;select v-model=&quot;inlimit&quot; @change=&quot;changelimit&quot;&gt;
        &lt;option v-for=&quot;val of limits&quot; :key=&quot;val&quot; :value=&quot;val&quot;&gt;
          {{ val }} æ¡/é¡µ
        &lt;/option&gt;
      &lt;/select&gt;
    &lt;/span&gt;
    &lt;a v-if=&quot;showRefresh&quot; href=&quot;javascript:;&quot; @click=&quot;refresh&quot;
      class=&quot;pager-refresh&quot;&gt;
      &lt;i class=&quot;wv-icon wv-icon-refresh&quot; /&gt;
    &lt;/a&gt;
    &lt;span v-if=&quot;props.showSkip&quot; class=&quot;pager-skip&quot;&gt;
      åˆ°ç¬¬
      &lt;input v-model=&quot;currentPageShow&quot; @keypress.enter=&quot;jumpPage()&quot;
        type=&quot;number&quot; class=&quot;input input-number&quot; /&gt;é¡µ
      &lt;button type=&quot;button&quot; class=&quot;pager-btn&quot; @click=&quot;jumpPage()&quot;
        :disabled=&quot;currentPageShow &gt; maxPage || currentPageShow == currentPage&quot;&gt;
        ç¡®è®¤
      &lt;/button&gt;
    &lt;/span&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<ol>
<li>
<p>æœ€å¤–å±‚æ˜¯åˆ†é¡µç»„ä»¶å®¹å™¨ï¼ˆ<code>div.pager</code>ï¼‰ï¼Œå†…å®¹ä»å·¦åˆ°å³ä¸ºï¼šæ€»æ¡æ•°å’Œæ€»é¡µæ•°æ–‡æœ¬ï¼ˆ<code>span</code>ï¼‰ã€ä¸Šä¸€é¡µé“¾æ¥ï¼ˆ<code>a</code>ï¼‰ã€é¡µç ï¼ˆ<code>template</code>&gt;<code>span</code>&gt;<code>em</code>ï¼‰ã€ä¸‹ä¸€é¡µé“¾æ¥ï¼ˆ<code>a</code>ï¼‰ã€æ¯é¡µæ•°é‡é€‰æ‹©æ¡†ï¼ˆ<code>span</code>&gt;<code>select</code>ï¼‰ã€åˆ·æ–°æŒ‰é’®å›¾æ ‡ï¼ˆ<code>a</code>&gt;<code>i</code>ï¼‰ã€è·³è½¬æ–‡æœ¬ã€è·³è½¬è¾“å…¥æ¡†ï¼ˆ<code>input</code>ï¼‰ã€è·³è½¬ç¡®å®šæŒ‰é’®ï¼ˆ<code>button</code>ï¼‰ã€‚</p>
</li>
<li>
<p>æœ‰ä»¥ä¸‹æ’æ§½ï¼š</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>æ’æ§½</th>
<th>æè¿°</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>prev</code></td>
<td>ä¸Šä¸€é¡µ</td>
<td>ä¸Šä¸€é¡µ</td>
</tr>
<tr>
<td><code>next</code></td>
<td>ä¸‹ä¸€é¡µ</td>
<td>ä¸‹ä¸€é¡µ</td>
</tr>
</tbody>
</table>
<h4 id="js-ä»£ç ">JS ä»£ç </h4>
<ol>
<li><code>props</code>ï¼Œæœ‰ä»¥ä¸‹å±æ€§å’Œé»˜è®¤å€¼ï¼š</li>
</ol>
<pre><code class="language-ts">interface PageProps {
  total: number
  limit: number
  theme?: string
  showPage?: boolean
  showSkip?: boolean
  showCount?: boolean
  showLimit?: boolean
  showRefresh?: boolean
  pages?: number
  limits?: number[]
  modelValue?: number
}

const props = withDefaults(defineProps &lt; PageProps &gt; (), {
  limit: 10, // æ¯é¡µæ•°é‡
  pages: 10, // é¡µç é“¾æ¥æœ€å¤§æ•°é‡
  modelValue: 1, // å½“å‰é¡µ
  theme: 'blue', // ä¸»é¢˜è‰²
  showPage: false, // æ˜¾ç¤ºé¡µç 
  showSkip: false, // æ˜¾ç¤ºè·³è½¬
  showCount: false, // æ˜¾ç¤ºæ€»æ•°
  showLimit: true, // æ˜¾ç¤ºæ¯é¡µæ•°é‡é€‰æ‹©æ¡†
  showRefresh: false, // æ˜¾ç¤ºåˆ·æ–°æŒ‰é’®å›¾æ ‡
  limits: () =&gt; [10, 20, 30, 40, 50], // æ¯é¡µæ•°é‡é€‰æ‹©æ¡†çš„é€‰é¡¹
})
</code></pre>
<ol start="2">
<li><code>emits</code>ï¼Œæœ‰ä»¥ä¸‹äº‹ä»¶ï¼š</li>
</ol>
<pre><code class="language-ts">const emit = defineEmits([
  'update:modelValue', // å½“å‰é¡µå˜åŒ–
  'update:limit', // æ¯é¡µæ•°é‡é€‰æ‹©æ¡†çš„é€‰é¡¹å˜åŒ–
  'change', // å½“å‰é¡µå’Œæ¯é¡µæ•°é‡é€‰æ‹©æ¡†çš„é€‰é¡¹å˜åŒ–
])
</code></pre>
<ol start="3">
<li><code>watch</code>ï¼Œæœ‰ä»¥ä¸‹åœ¨æ•°æ®æ›´æ”¹æ—¶è°ƒç”¨çš„ä¾¦å¬å›è°ƒï¼š</li>
</ol>
<pre><code class="language-ts">watch( // ç›‘å¬ä¼ å…¥æ¯é¡µæ•°é‡å‚æ•°æ—¶ï¼Œèµ‹å€¼ç»™ inlimit
  () =&gt; props.limit,
  () =&gt; {
    inlimit.value = props.limit
  }
)
watch(inlimit, () =&gt; { // ç›‘å¬æ¯é¡µæ•°é‡é€‰æ‹©æ¡†çš„é€‰é¡¹å˜åŒ–æ—¶ï¼Œè§¦å‘äº‹ä»¶
  emit('update:limit', inlimit.value)
})
watch(currentPage, () =&gt; { // ç›‘å¬å½“å‰é¡µç å˜åŒ–æ—¶ï¼Œæ›´æ–° currentPageã€currentPageShow çš„å€¼ï¼Œè§¦å‘äº‹ä»¶
  const min = totalPage.value[0]
  const max = totalPage.value[totalPage.value.length - 1]
  if (currentPage.value &gt; max) currentPage.value = max
  if (currentPage.value &lt; min) currentPage.value = min
  currentPageShow.value = currentPage.value
  emit('update:modelValue', currentPage.value)
})
watch( // ç›‘å¬ä¼ å…¥å½“å‰é¡µç å‚æ•°æ—¶ï¼Œæ›´æ–° currentPageã€currentPageShow çš„å€¼
  () =&gt; props.modelValue,
  () =&gt; {
    currentPage.value = props.modelValue
    currentPageShow.value = currentPage.value
  }
)
</code></pre>
<h3 id="table">Table</h3>
<h4 id="html-ç»“æ„-2">HTML ç»“æ„</h4>
<pre><code class="language-html">&lt;template&gt;
  &lt;div ref=&quot;tableRef&quot;&gt;
    &lt;table class=&quot;wv-hide&quot; wv-filter=&quot;test&quot; /&gt;
    &lt;div class=&quot;wv-form wv-border-box wv-table-view&quot; :class=&quot;classes&quot;&gt;
      &lt;div v-if=&quot;defaultToolbar || slot.toolbar&quot; class=&quot;wv-table-tool&quot;&gt;
        &lt;div class=&quot;wv-table-tool-temp&quot;&gt;
          &lt;slot name=&quot;toolbar&quot; /&gt;
        &lt;/div&gt;
        &lt;div v-if=&quot;defaultToolbar&quot; class=&quot;wv-table-tool-self&quot;&gt;
          &lt;!-- ç­›é€‰ --&gt;
          &lt;wv-dropdown v-if=&quot;showToolbar('filter')&quot; updateAtScroll
            :style=&quot;toolbarStyle('filter')&quot;&gt;
            &lt;div class=&quot;wv-inline&quot; title=&quot;ç­›é€‰&quot; wv-event&gt;
              &lt;i class=&quot;wv-icon wv-icon-slider&quot; /&gt;
            &lt;/div&gt;
            &lt;template #content&gt;
              &lt;div class=&quot;wv-table-tool-checkbox&quot;&gt;
                &lt;wv-checkbox v-for=&quot;column in tableHeadColumns[0]&quot;
                  v-model=&quot;tableColumnKeys&quot; skin=&quot;primary&quot;
                  :disabled=&quot;!!column.children&quot; :key=&quot;column.key&quot;
                  :value=&quot;column.key&quot;&gt;{{ column.title }}&lt;/wv-checkbox&gt;
              &lt;/div&gt;
            &lt;/template&gt;
          &lt;/wv-dropdown&gt;

          &lt;!-- å¯¼å‡º --&gt;
          &lt;div v-if=&quot;showToolbar('export')&quot; class=&quot;wv-inline&quot; title=&quot;å¯¼å‡º&quot;
            wv-event :style=&quot;toolbarStyle('export')&quot; @click=&quot;exportData()&quot;&gt;
            &lt;i class=&quot;wv-icon wv-icon-export&quot; /&gt;
          &lt;/div&gt;

          &lt;!-- æ‰“å° --&gt;
          &lt;div v-if=&quot;showToolbar('print')&quot; :style=&quot;toolbarStyle('print')&quot;
            class=&quot;wv-inline&quot; title=&quot;æ‰“å°&quot; wv-event @click=&quot;print()&quot;&gt;
            &lt;i class=&quot;wv-icon wv-icon-print&quot; /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class=&quot;wv-table-box-header&quot; v-if=&quot;slot.header&quot;&gt;
        &lt;slot name=&quot;header&quot; /&gt;
      &lt;/div&gt;

      &lt;div class=&quot;wv-table-box&quot;&gt;
        &lt;!-- è¡¨å¤´ --&gt;
        &lt;div class=&quot;wv-table-header&quot;&gt;
          &lt;!-- :style=&quot;[{ 'padding-right': `${scrollWidthCell}px` }]&quot; --&gt;
          &lt;div class=&quot;wv-table-header-wrapper&quot; ref=&quot;tableHeader&quot;&gt;
            &lt;table class=&quot;wv-table&quot; :wv-size=&quot;size&quot; :wv-skin=&quot;skin&quot;
              ref=&quot;tableHeaderTable&quot;&gt;
              &lt;colgroup&gt;
                &lt;template v-for=&quot;column in tableBodyColumns&quot; :key=&quot;column&quot;&gt;
                  &lt;template v-if=&quot;tableColumnKeys.includes(column.key)&quot;&gt;
                    &lt;col :width=&quot;column.width&quot; :style=&quot;{
                        minWidth: column.minWidth ? column.minWidth : '50px',
                      }&quot; /&gt;
                  &lt;/template&gt;
                &lt;/template&gt;
              &lt;/colgroup&gt;
              &lt;thead&gt;
                &lt;template v-for=&quot;(
                    tableHeadColumn, tableHeadColumnIndex
                  ) in tableHeadColumns&quot; :key=&quot;tableHeadColumnIndex&quot;&gt;
                  &lt;tr&gt;
                    &lt;template v-for=&quot;(column, columnIndex) in tableHeadColumn&quot;
                      :key=&quot;column&quot;&gt;
                      &lt;th v-if=&quot;tableColumnKeys.includes(column.key)&quot;
                        :colspan=&quot;column.colspan&quot; :rowspan=&quot;column.rowspan&quot;
                        class=&quot;wv-table-cell&quot; :class=&quot;[
                          renderFixedClassName(column, columnIndex),
                          column.fixed ? `wv-table-fixed-${column.fixed}` : '',
                          column.type == 'checkbox'
                            ? 'wv-table-cell-checkbox'
                            : '',
                          column.type == 'radio' ? 'wv-table-cell-radio' : '',
                          column.type == 'number' ? 'wv-table-cell-number' : '',
                        ]&quot; :style=&quot;[
                          {
                            textAlign: column.align,
                          },
                          renderHeadFixedStyle(
                            column,
                            columnIndex,
                            tableHeadColumn,
                            tableHeadColumnIndex,
                            tableHeadColumns
                          ),
                        ]&quot;&gt;
                        &lt;template v-if=&quot;column.type == 'checkbox'&quot;&gt;
                          &lt;wv-checkbox v-model=&quot;hasChecked&quot;
                            :is-indeterminate=&quot;!allChecked&quot; skin=&quot;primary&quot;
                            value=&quot;all&quot; @change=&quot;changeAll&quot; /&gt;
                        &lt;/template&gt;
                        &lt;template v-else&gt;
                          &lt;span&gt;
                            &lt;template v-if=&quot;column.titleSlot&quot;&gt;
                              &lt;slot :name=&quot;column.titleSlot&quot; /&gt;
                            &lt;/template&gt;
                            &lt;template v-else&gt;
                              {{ column.title }}
                            &lt;/template&gt;
                          &lt;/span&gt;
                          &lt;!-- æ’æ§½ --&gt;
                          &lt;span v-if=&quot;column.sort&quot;
                            class=&quot;wv-table-sort wv-inline&quot; wv-sort&gt;
                            &lt;i @click.stop=&quot;sortTable($event, column.key, 'asc')&quot;
                              class=&quot;wv-edge wv-table-sort-asc&quot; title=&quot;å‡åº&quot; /&gt;
                            &lt;i @click.stop=&quot;
                                sortTable($event, column.key, 'desc')
                              &quot; class=&quot;wv-edge wv-table-sort-desc&quot;
                              title=&quot;é™åº&quot; /&gt;
                          &lt;/span&gt;
                        &lt;/template&gt;
                      &lt;/th&gt;
                    &lt;/template&gt;
                  &lt;/tr&gt;
                &lt;/template&gt;
              &lt;/thead&gt;
            &lt;/table&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- è¡¨èº« --&gt;
        &lt;div class=&quot;wv-table-body wv-table-main&quot;
          :style=&quot;{ height: height, maxHeight: maxHeight }&quot; ref=&quot;tableBody&quot;&gt;
          &lt;table class=&quot;wv-table&quot;
            v-if=&quot;tableDataSource.length &gt; 0 &amp;&amp; loading == false&quot;
            :class=&quot;{ 'wv-table-even': props.even }&quot; :wv-size=&quot;size&quot;
            :wv-skin=&quot;skin&quot;&gt;
            &lt;colgroup&gt;
              &lt;template v-for=&quot;(column, columnIndex) in tableBodyColumns&quot;
                :key=&quot;columnIndex&quot;&gt;
                &lt;template v-if=&quot;tableColumnKeys.includes(column.key)&quot;&gt;
                  &lt;col :width=&quot;column.width&quot; :style=&quot;{
                      minWidth: column.minWidth ? column.minWidth : '50px',
                    }&quot; /&gt;
                &lt;/template&gt;
              &lt;/template&gt;
            &lt;/colgroup&gt;
            &lt;tbody&gt;
              &lt;!-- æ¸²æŸ“ --&gt;
              &lt;template v-for=&quot;(children, index) in tableDataSource&quot;
                :key=&quot;index&quot;&gt;
                &lt;table-row :id=&quot;id&quot; :index=&quot;index&quot; :data=&quot;children&quot; :page=&quot;page&quot;
                  :columns=&quot;tableBodyColumns&quot; :columnSlotNames=&quot;columnSlotNames&quot;
                  :indent-size=&quot;indentSize&quot;
                  :currentIndentSize=&quot;currentIndentSize&quot;
                  :tableColumnKeys=&quot;tableColumnKeys&quot;
                  :expandSpace=&quot;childrenExpandSpace&quot; :expandIndex=&quot;expandIndex&quot;
                  :cellStyle=&quot;cellStyle&quot; :cellClassName=&quot;cellClassName&quot;
                  :rowStyle=&quot;rowStyle&quot; :rowClassName=&quot;rowClassName&quot;
                  :spanMethod=&quot;spanMethod&quot; :defaultExpandAll=&quot;defaultExpandAll&quot;
                  :getCheckboxProps=&quot;getCheckboxProps&quot;
                  :getRadioProps=&quot;getRadioProps&quot;
                  v-model:expandKeys=&quot;tableExpandKeys&quot;
                  v-model:selectedKeys=&quot;tableSelectedKeys&quot;
                  v-model:selectedKey=&quot;tableSelectedKey&quot; @row=&quot;rowClick&quot;
                  @row-double=&quot;rowDoubleClick&quot;
                  @row-contextmenu=&quot;rowContextmenu&quot;&gt;
                  &lt;template v-for=&quot;name in columnSlotNames&quot; #[name]=&quot;slotProp: {
                      data: any,
                      column: any,
                      row: any,
                      rowIndex: number,
                      columnIndex: number,
                    }&quot;&gt;
                    &lt;slot :name=&quot;name&quot; :row=&quot;slotProp.data&quot;
                      :data=&quot;slotProp.data&quot; :column=&quot;slotProp.column&quot;
                      :rowIndex=&quot;slotProp.rowIndex&quot;
                      :columnIndex=&quot;slotProp.columnIndex&quot; /&gt;
                  &lt;/template&gt;
                  &lt;template v-if=&quot;slot.expand&quot;
                    #expand=&quot;slotProp: { data: any, row: any }&quot;&gt;
                    &lt;slot name=&quot;expand&quot; :data=&quot;slotProp.data&quot;
                      :row=&quot;slotProp.row&quot; /&gt;
                  &lt;/template&gt;
                &lt;/table-row&gt;
              &lt;/template&gt;
              &lt;tr v-if=&quot;hasTotalRow&quot; class=&quot;wv-table-total&quot;&gt;
                &lt;template v-for=&quot;(column, columnIndex) in columns&quot;
                  :key=&quot;columnIndex&quot;&gt;
                  &lt;template v-if=&quot;tableColumnKeys.includes(column.key)&quot;&gt;
                    &lt;td :style=&quot;[
                        {
                          textAlign: column.align,
                          whiteSpace: column.ellipsisTooltip
                            ? 'nowrap'
                            : 'normal',
                        },
                        renderFixedStyle(column, columnIndex),
                      ]&quot; :class=&quot;[
                        'wv-table-cell',
                        renderFixedClassName(column, columnIndex),
                        column.fixed ? `wv-table-fixed-${column.fixed}` : '',
                      ]&quot; v-html=&quot;renderTotalRowCell(column)&quot; /&gt;
                  &lt;/template&gt;
                &lt;/template&gt;
              &lt;/tr&gt;
            &lt;/tbody&gt;
          &lt;/table&gt;
          &lt;template v-if=&quot;tableDataSource.length == 0 &amp;&amp; loading == false&quot;&gt;
            &lt;wv-empty /&gt;
            &lt;div :style=&quot;{ width: tableBodyEmptyWidth }&quot; /&gt;
          &lt;/template&gt;
          &lt;template v-if=&quot;loading == true&quot;&gt;
            &lt;div class=&quot;wv-table-loading&quot;&gt;
              &lt;i
                class=&quot;wv-icon-loading wv-icon wv-anim wv-anim-rotate wv-anim-loop&quot; /&gt;
            &lt;/div&gt;
          &lt;/template&gt;
        &lt;/div&gt;
        &lt;div class=&quot;wv-table-footer&quot; v-if=&quot;slot.footer&quot;&gt;
          &lt;slot name=&quot;footer&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div v-if=&quot;page &amp;&amp; page.total &gt; 0&quot; class=&quot;wv-table-page&quot;&gt;
        &lt;table-page :total=&quot;page.total&quot; :pages=&quot;page.pages&quot; :theme=&quot;page.theme&quot;
          :limits=&quot;page.limits&quot; :showSkip=&quot;page.showSkip&quot;
          :show-page=&quot;page.showPage&quot; :showRefresh=&quot;page.showRefresh&quot;
          :showLimit=&quot;page.showLimit&quot; :showCount=&quot;page.showCount&quot;
          v-model:current=&quot;page.current&quot; v-model:limit=&quot;page.limit&quot;
          @change=&quot;change&quot; /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<ol>
<li>
<p>æœ€å¤–å±‚æ˜¯è¡¨æ ¼ç»„ä»¶å®¹å™¨ï¼ˆ<code>div.wv-table-view</code>ï¼‰ï¼Œå†…å®¹ä»ä¸Šåˆ°ä¸‹ä¸ºï¼šå·¥å…·æ ï¼ˆ<code>div.wv-table-tool</code>ï¼‰ã€headeræ’æ§½ï¼ˆ<code>div.wv-table-box-header</code>ï¼‰ã€è¡¨æ ¼ï¼ˆ<code>div.wv-table-box</code>ï¼‰ã€åˆ†é¡µï¼ˆ<code>div.wv-table-page</code>ï¼‰ã€‚</p>
</li>
<li>
<p>æœ‰ä»¥ä¸‹æ’æ§½ï¼š</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>æ’æ§½</th>
<th>æè¿°</th>
<th>å‚æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toolbar</code></td>
<td>è‡ªå®šä¹‰å·¥å…·æ </td>
<td>--</td>
</tr>
<tr>
<td><code>header</code></td>
<td>é¡¶éƒ¨æ‰©å±•</td>
<td>--</td>
</tr>
<tr>
<td><code>footer</code></td>
<td>åº•éƒ¨æ‰©å±•</td>
<td>--</td>
</tr>
<tr>
<td><code>column.titleSlot</code></td>
<td>åˆ—æ ‡é¢˜</td>
<td></td>
</tr>
<tr>
<td><code>expand</code></td>
<td>åµŒå¥—é¢æ¿</td>
<td><code>{ row } </code></td>
</tr>
<tr>
<td><code>customSlot</code></td>
<td>è‡ªå®šä¹‰åˆ—æ’æ§½</td>
<td><code>{ rowï¼ŒrowIndexï¼Œcolumnï¼ŒcolumnIndex }</code></td>
</tr>
</tbody>
</table>
<h4 id="js-ä»£ç -2">JS ä»£ç </h4>
<ol>
<li><code>props</code>ï¼Œæœ‰ä»¥ä¸‹å±æ€§å’Œé»˜è®¤å€¼ï¼š</li>
</ol>
<pre><code class="language-ts">interface TableProps {
  id?: string
  skin?: string
  size?: string
  page?: Recordable
  columns: Recordable[]
  dataSource: Recordable[]
  defaultToolbar?: boolean | any[]
  selectedKey?: string
  selectedKeys?: Recordable[]
  indentSize?: number
  childrenColumnName?: string
  height?: number
  maxHeight?: string
  even?: boolean
  expandIndex?: number
  rowClassName?: string | Function
  cellClassName?: string | Function
  rowStyle?: string | Function
  cellStyle?: string | Function
  spanMethod?: Function
  defaultExpandAll?: boolean
  expandKeys?: Recordable[]
  loading?: boolean
  getCheckboxProps?: Function
  getRadioProps?: Function
}

const props = withDefaults(defineProps&lt;TableProps&gt;(), {
  id: 'id', // ä¸»é”®
  size: 'md', // å°ºå¯¸
  indentSize: 30, // æ ‘è¡¨è¡Œçº§ç¼©è¿›
  childrenColumnName: 'children', // æ ‘èŠ‚ç‚¹å­—æ®µ
  dataSource: () =&gt; [], // æ•°æ®æº
  selectedKeys: () =&gt; [], // é€‰ä¸­é¡¹ (å¤šé€‰)
  defaultToolbar: false, // å·¥å…·æ 
  selectedKey: '', // é€‰ä¸­é¡¹ (å•é€‰)
  maxHeight: 'auto', // è¡¨æ ¼æœ€å¤§é«˜åº¦
  even: false, // æ–‘é©¬æ¡çº¹
  rowClassName: '', // è¡Œç±»åç§°
  cellClassName: '', // åˆ—ç±»åç§°
  expandIndex: 0, // å±•å¼€æ‰€åœ¨åˆ—
  rowStyle: '', // è¡Œæ ·å¼
  cellStyle: '', // åˆ—æ ·å¼
  defaultExpandAll: false, // é»˜è®¤å±•å¼€æ‰€æœ‰åˆ—
  spanMethod: () =&gt; {}, // åˆå¹¶ç®—æ³•
  expandKeys: () =&gt; [], // å±•å¼€çš„åˆ—
  loading: false, // åŠ è½½åŠ¨ç”»
  getCheckboxProps: () =&gt; {}, // å¤šé€‰è¡Œå±æ€§
  getRadioProps: () =&gt; {}, // å•é€‰è¡Œå±æ€§
})
</code></pre>
<ol start="2">
<li><code>emits</code>ï¼Œæœ‰ä»¥ä¸‹äº‹ä»¶ï¼š</li>
</ol>
<pre><code class="language-ts">const emit = defineEmits([
  'update:current', // å½“å‰é¡µå˜åŒ–
  'update:limit', // æ¯é¡µæ•°é‡é€‰æ‹©æ¡†çš„é€‰é¡¹å˜åŒ–
  'change', // å½“å‰é¡µå’Œæ¯é¡µæ•°é‡é€‰æ‹©æ¡†çš„é€‰é¡¹å˜åŒ–
  'update:expandKeys', // å±•å¼€æ ‘èŠ‚ç‚¹
  'update:selectedKeys', // å¤šé€‰è¡Œé€‰ä¸­
  'update:selectedKey', // å•é€‰è¡Œé€‰ä¸­
  'row-contextmenu', // è¡Œå³å‡»
  'row-double', // è¡ŒåŒå‡»
  'row', // è¡Œå•å‡»
])
</code></pre>
<ol start="3">
<li><code>watch</code>ï¼Œæœ‰ä»¥ä¸‹åœ¨æ•°æ®æ›´æ”¹æ—¶è°ƒç”¨çš„ä¾¦å¬å›è°ƒï¼š</li>
</ol>
<pre><code class="language-ts">watch( // ç›‘å¬ä¼ å…¥é«˜åº¦ã€æ•°æ®æºå‚æ•°å˜åŒ–æ—¶ï¼Œæ›´æ–°è¡¨æ ¼æ»šåŠ¨å®½åº¦
  () =&gt; [props.height, props.maxHeight, props.dataSource],
  () =&gt; {
    nextTick(() =&gt; {
      getScrollWidth()
    })
  }
)

watch( // ç›‘å¬ columns å˜åŒ–æ—¶ï¼Œè®¡ç®—åˆ—å†…å®¹
  tableColumns,
  () =&gt; {
    tableColumnKeys.value = []
    tableBodyColumns.value = []
    tableHeadColumns.value = []

    findFindNode(tableColumns.value)
    findFindNodes(tableColumns.value)
    findFinalNode(0, tableColumns.value)
  },
  { immediate: true }
)

watch( // ç›‘å¬ä¼ å…¥å¤šé€‰è¡Œé€‰ä¸­å‚æ•°å˜åŒ–æ—¶ï¼Œæ›´æ–° tableSelectedKeys
  () =&gt; props.selectedKeys,
  () =&gt; {
    tableSelectedKeys.value = props.selectedKeys
  },
  { deep: true }
)

watch( // ç›‘å¬ä¼ å…¥æ ‘èŠ‚ç‚¹å±•å¼€å‚æ•°å˜åŒ–æ—¶ï¼Œæ›´æ–° tableExpandKeys
  () =&gt; props.expandKeys,
  () =&gt; {
    tableExpandKeys.value = props.expandKeys
  },
  { deep: true }
)

watch( // ç›‘å¬ä¼ å…¥æ•°æ®æºå‚æ•°å˜åŒ–æ—¶ï¼Œæ›´æ–° tableDataSourceã€tableSelectedKeysã€tableSelectedKey
  () =&gt; props.dataSource,
  () =&gt; {
    tableDataSource.value = [...props.dataSource]
    tableSelectedKeys.value = []
    tableSelectedKey.value = s
  },
  { deep: true }
)

watch( // ç›‘å¬å¤šé€‰è¡Œé€‰ä¸­å˜åŒ–æ—¶ï¼Œæ›´æ–° allCheckedã€hasCheckedï¼ˆå›¾æ ‡æ”¹å˜ï¼‰ï¼Œè§¦å‘äº‹ä»¶
  tableSelectedKeys,
  () =&gt; {
    if (tableSelectedKeys.value.length === props.dataSource.length) {
      allChecked.value = true
    } else {
      allChecked.value = false
    }
    if (tableSelectedKeys.value.length &gt; 0) {
      hasChecked.value = true
    } else {
      hasChecked.value = false
    }
    emit('update:selectedKeys', tableSelectedKeys.value)
  },
  { deep: true, immediate: true }
)

watch( // ç›‘å¬å±•å¼€æ ‘èŠ‚ç‚¹æ—¶ï¼Œè§¦å‘äº‹ä»¶
  tableExpandKeys,
  () =&gt; {
    emit('update:expandKeys', tableExpandKeys.value)
  },
  { deep: true, immediate: true }
)
</code></pre>
<h2 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h2>
<ul>
<li>é¡¹ç›®åœ°å€ï¼šhttps://github.com/linhr123/weView</li>
<li>æ¼”ç¤ºåœ°å€ï¼šhttps://zzy003527.github.io</li>
</ul>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://zkrisj.github.io/post/vitest-zhi-shi-zong-jie-or-qing-xun-ying-bi-ji/" class="post-title gt-a-link">
                    Vitest çŸ¥è¯†æ€»ç»“ ï½œ é’è®­è¥ç¬”è®°
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">å…¨æ ˆæŠ€æœ¯æ–‡ç« è®°å½•åšå®¢</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        
    </div>
    <div>
        Theme <a href="https://github.com/imhanjie/gridea-theme-pure" target="_blank">Pure</a>, Powered by <a
                href="https://gridea.dev" target="_blank">Gridea</a> | <a href="https://zkrisj.github.io/atom.xml" target="_blank">RSS</a>
    </div>
</div>

<script>
  hljs.highlightAll()
</script>

    </div>
</div>
</body>
</html>
